{"version":3,"sources":["../../../../src/modules/Post/connectors/getPostTerms.js"],"names":["Terms","TermRelationships","TermTaxonomy","settings","wp_prefix","privateSettings","postId","findAll","where","object_id","include","attributes","model","then","relationships","map","r","dataValues"],"mappings":";;;;;;;;kBAAe,UAAUA,KAAV,EAAiBC,iBAAjB,EAAoCC,YAApC,EAAkDC,QAAlD,EAA4D;AAAA,MAClEC,SADkE,GACrDD,SAASE,eAD4C,CAClED,SADkE;;;AAGzE,SAAO,UAASE,MAAT,EAAiB;AACtB,WAAOL,kBAAkBM,OAAlB,CAA0B;AAC/BC,aAAO;AACLC,mBAAWH;AADN,OADwB;AAI/BI,eAAS,CAAC;AACRC,oBAAY,CAAC,MAAD,EAAS,MAAT,CADJ;AAERC,eAAOZ;AAFC,OAAD,EAGN;AACDW,oBAAY,CAAC,UAAD,EAAa,QAAb,CADX;AAEDC,eAAOV;AAFN,OAHM;AAJsB,KAA1B,EAWJW,IAXI,CAWC,yBAAiB;AACvB,aAAOC,cAAcC,GAAd,CAAkB,aAAK;AAC5B,4BACKC,EAAEC,UAAF,CAAgBb,SAAhB,WAAiCa,UADtC,EAEKD,EAAEC,UAAF,CAAgBb,SAAhB,oBAA0Ca,UAF/C;AAID,OALM,CAAP;AAMD,KAlBM,CAAP;AAmBD,GApBD;AAqBD,C","file":"getPostTerms.js","sourcesContent":["export default function (Terms, TermRelationships, TermTaxonomy, settings) {\r\n  const {wp_prefix} = settings.privateSettings\r\n\r\n  return function(postId) {\r\n    return TermRelationships.findAll({\r\n      where: {\r\n        object_id: postId,\r\n      },\r\n      include: [{\r\n        attributes: ['name', 'slug'],\r\n        model: Terms\r\n      }, {\r\n        attributes: ['taxonomy', 'parent'],\r\n        model: TermTaxonomy\r\n      }]\r\n    }).then(relationships => {\r\n      return relationships.map(r => {\r\n        return {\r\n          ...r.dataValues[`${wp_prefix}term`].dataValues,\r\n          ...r.dataValues[`${wp_prefix}term_taxonomy`].dataValues\r\n        }\r\n      })\r\n    })\r\n  }\r\n}"]}