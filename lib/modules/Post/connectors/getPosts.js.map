{"version":3,"sources":["../../../../src/modules/Post/connectors/getPosts.js"],"names":["Post","post_type","order","limit","skip","userId","orderBy","direction","where","post_status","Op","in","post_author","findAll","offset","then","r","Sequelize"],"mappings":";;;;;;kBAGe,UAAUA,IAAV,EAAgB;AAC7B,SAAO,gBAA6D;AAAA,QAAlDC,SAAkD,QAAlDA,SAAkD;AAAA,QAAvCC,KAAuC,QAAvCA,KAAuC;AAAA,0BAAhCC,KAAgC;AAAA,QAAhCA,KAAgC,8BAAxB,EAAwB;AAAA,yBAApBC,IAAoB;AAAA,QAApBA,IAAoB,6BAAb,CAAa;AAAA,QAAVC,MAAU,QAAVA,MAAU;;AAClE,QAAMC,UAAUJ,QAAQ,CAACA,MAAMI,OAAP,EAAgBJ,MAAMK,SAAtB,CAAR,GAA2C,CAAC,YAAD,EAAe,KAAf,CAA3D;AACA,QAAMC,QAAQ;AACZC,mBAAa,SADD;AAEZR,qCACGS,GAAGC,EADN,EACW,CAAC,MAAD,CADX;AAFY,KAAd;;AAOA,QAAIV,SAAJ,EAAe;AACbO,YAAMP,SAAN,uBACGS,GAAGC,EADN,EACWV,SADX;AAGD;;AAED,QAAII,MAAJ,EAAY;AACVG,YAAMI,WAAN,GAAoBP,MAApB;AACD;;AAED,WAAOL,KAAKa,OAAL,CAAa;AAClBL,aAAOA,KADW;AAElBN,aAAO,CAACI,OAAD,CAFW;AAGlBH,aAAOA,KAHW;AAIlBW,cAAQV;AAJU,KAAb,EAKJW,IALI,CAKC,aAAK;AACX,aAAOC,CAAP;AACD,KAPM,CAAP;AAQD,GA3BD;AA4BD,C;;AAhCD;;;;;;;;AACA,IAAMN,KAAKO,oBAAUP,EAArB","file":"getPosts.js","sourcesContent":["import Sequelize from 'sequelize'\r\nconst Op = Sequelize.Op\r\n\r\nexport default function (Post) {\r\n  return function({ post_type, order, limit = 10, skip = 0, userId }) {\r\n    const orderBy = order ? [order.orderBy, order.direction] : ['menu_order', 'ASC']\r\n    const where = {\r\n      post_status: 'publish',\r\n      post_type: {\r\n        [Op.in]: ['post']\r\n      }\r\n    }\r\n    \r\n    if (post_type) {\r\n      where.post_type = {\r\n        [Op.in]: post_type\r\n      }\r\n    }\r\n\r\n    if (userId) {\r\n      where.post_author = userId\r\n    }\r\n\r\n    return Post.findAll({\r\n      where: where,\r\n      order: [orderBy],\r\n      limit: limit,\r\n      offset: skip\r\n    }).then(r => {\r\n      return r\r\n    })\r\n  }\r\n}"]}