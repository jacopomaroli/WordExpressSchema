{"version":3,"sources":["../../../../src/modules/Term/connectors/getTermParentsList.js"],"names":["Terms","TermTaxonomy","settings","wp_prefix","privateSettings","getTermParentsList","parentTermId","termIds","findOne","attributes","where","term_taxonomy_id","include","model","then","term_taxonomy","res","parent","slug","name"],"mappings":";;;;;;kBAAe,UAAUA,KAAV,EAAiBC,YAAjB,EAA+BC,QAA/B,EAAyC;AAAA,MAC/CC,SAD+C,GAClCD,SAASE,eADyB,CAC/CD,SAD+C;;;AAGtD,SAAO,SAASE,kBAAT,CAA4BC,YAA5B,EAA0CC,OAA1C,EAAmD;AACxDA,cAAUA,WAAW,EAArB;;AAEA,WAAON,aAAaO,OAAb,CAAqB;AAC1BC,kBAAY,CAAC,QAAD,CADc;AAE1BC,aAAO;AACLC,0BAAkBL;AADb,OAFmB;AAK1BM,eAAS,CAAC;AACRH,oBAAY,CAAC,MAAD,EAAS,MAAT,CADJ;AAERI,eAAOb;AAFC,OAAD;AALiB,KAArB,EAUNc,IAVM,CAUD,UAAUC,aAAV,EAAyB;AAC7B,UAAGA,aAAH,EAAkB;AAChB,YAAIC,MAAM;AACRC,kBAAQF,cAAcE,MADd;AAERC,gBAAMH,cAAiBZ,SAAjB,WAAkCe,IAFhC;AAGRC,gBAAMJ,cAAiBZ,SAAjB,WAAkCgB;AAHhC,SAAV;AAKAZ,mBAAWS,GAAX,4BAAmBT,OAAnB;AACA,eAAOF,mBAAmBU,cAAcE,MAAjC,EAAyCV,OAAzC,CAAP;AACD;AACD,aAAOA,OAAP;AACD,KArBM,CAAP;AAsBD,GAzBD;AA0BD,C","file":"getTermParentsList.js","sourcesContent":["export default function (Terms, TermTaxonomy, settings) {\r\n  const {wp_prefix} = settings.privateSettings\r\n\r\n  return function getTermParentsList(parentTermId, termIds) {\r\n    termIds = termIds || []\r\n    \r\n    return TermTaxonomy.findOne({\r\n      attributes: ['parent'],\r\n      where: {\r\n        term_taxonomy_id: parentTermId\r\n      },\r\n      include: [{\r\n        attributes: ['slug', 'name'],\r\n        model: Terms\r\n      }]\r\n    })\r\n    .then(function (term_taxonomy) {\r\n      if(term_taxonomy) {\r\n        let res = {\r\n          parent: term_taxonomy.parent,\r\n          slug: term_taxonomy[`${wp_prefix}term`].slug,\r\n          name: term_taxonomy[`${wp_prefix}term`].name\r\n        }\r\n        termIds = [res, ...termIds]\r\n        return getTermParentsList(term_taxonomy.parent, termIds)\r\n      } \r\n      return termIds\r\n    })\r\n  }\r\n}\r\n"]}