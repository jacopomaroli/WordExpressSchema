{"version":3,"sources":["../src/resolvers.js"],"names":["WordExpressResolvers","Connectors","publicSettings","Resolvers","Query","settings","category","_","term_id","name","getTerm","posts","args","getPosts","post","id","getPost","postmeta","post_id","keys","getPostmeta","menus","getMenu","user","getUser","attachments","ids","getThumbnails","Category","getTermPosts","Post","layout","getPostLayout","post_meta","thumbnail","getPostThumbnail","author","userId","post_author","categories","getPostTerms","permalink","getPermalink","post_excerpt","excerpt_length","post_content","split","slice","join","Postmeta","connecting_post","meta_value","Menu","items","menu","MenuItem","navitem","menuItem","linkedId","children","User","a"],"mappings":"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","file":"resolvers.js","sourcesContent":["export default function WordExpressResolvers(Connectors, publicSettings) {\r\n  const Resolvers = {\r\n    Query: {\r\n      settings() {\r\n        return publicSettings\r\n      },\r\n      category(_, { term_id, name }) {\r\n        return Connectors.getTerm(term_id, name)\r\n      }, \r\n      posts(_, args) {\r\n        return Connectors.getPosts(args)\r\n      },\r\n      post(_, {name, id}) {\r\n        return Connectors.getPost(id, name)\r\n      }, \r\n      postmeta(_, {post_id, keys}) {\r\n        return Connectors.getPostmeta(post_id, keys)\r\n      },\r\n      menus(_, {name}) {\r\n        return Connectors.getMenu(name)\r\n      },\r\n      user(_, {id, name}) {\r\n        return Connectors.getUser({id, name})\r\n      },\r\n      attachments(_, {ids}) {\r\n        return Connectors.getThumbnails(ids)\r\n      }\r\n    },\r\n    Category: {\r\n      posts(category, args) {\r\n        return Connectors.getTermPosts(category.term_id, args)\r\n      }\r\n    },\r\n    Post: {\r\n      layout(post) {\r\n        return Connectors.getPostLayout(post.id)\r\n      },\r\n      post_meta(post, keys) {\r\n        return Connectors.getPostmeta(post.id, keys)\r\n      },\r\n      thumbnail(post) {\r\n        return Connectors.getPostThumbnail(post.id)\r\n      },\r\n      author(post) {\r\n        return Connectors.getUser({userId: post.post_author})\r\n      },\r\n      categories(post) {\r\n        return Connectors.getPostTerms(post.id)\r\n      },\r\n      permalink(post, args) {\r\n        return Connectors.getPermalink(post, args)\r\n      },\r\n      post_excerpt: function post_excerpt(post, { excerpt_length }) {\r\n        return post.post_excerpt || post.post_content.split(' ').slice(0, excerpt_length || 55).join(' ')\r\n      }\r\n    },\r\n    Postmeta: {\r\n      connecting_post(postmeta) {\r\n        return Connectors.getPost(postmeta.meta_value)\r\n      }\r\n    },\r\n    Menu: {\r\n      items(menu) {\r\n        return menu.items\r\n      }\r\n    },\r\n    MenuItem: {\r\n      navitem(menuItem) {\r\n        return Connectors.getPost(menuItem.linkedId)\r\n      },\r\n      children(menuItem) {\r\n        return menuItem.children\r\n      }\r\n    },\r\n    User: {\r\n      posts(user, args) {\r\n        const a = {\r\n          ...args,\r\n          userId: user.id\r\n        }\r\n        return Connectors.getPosts(a)\r\n      },\r\n    }\r\n  }\r\n\r\n  return Resolvers\r\n}\r\n"]}